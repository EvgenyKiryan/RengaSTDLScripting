Файл описания параметров
========================

Перейдём к описанию статической части описания шаблона стиля. Это создание параметров, с помощью которых пользователь будет управлять формой арматурного изделия в диалоге стиля объекта Renga.

1. В рабочей среде редактора создадим папку с названием будущего оборудования ``Reinforcing Plain Mesh`` и создадим в ней файл ``parameters.json``. Добавим в файл объект ``metadata`` и массив ``styleParameters``.

2. Заполним объект ``metadata`` информацией о шаблоне. Добавим атрибут ``defaultName`` — название по умолчанию в списке стилей объекта (его можно изменить после импорта в Renga). Также добавим (не редактируемые в Renga) атрибуты ``description``, ``version`` и ``author`` — они будут отображаться только в диалоге "Шаблоны стилей арматурных изделий" при загрузке шаблона стиля в Renga.

.. code-block::
    :caption: Внесение информации о шаблоне в объект ``metadata``
    :linenos:

    "metadata": {
        "defaultName": "Арматурный каркас плоский - 2С",
        "description": "2 стержня по ширине, с выпусками вверх. Используются для армирования стен и пилонов",
        "version": "1.0.0",
        "author": "Иванов Иван Иванович"
    }

3. Создадим группы параметров, которые будут отображаться в диалоге стиля объекта.

.. admonition:: Соглашение об описании параметров

    Для унификации отображения параметров в диалоге стиля объекта принято группу "Общие" делать первой в списке. А далее создавать группы для задания параметров различным типам арматуры.

.. important:: У арматурных изделий существует системный параметр ``Марка``. Он будет создаваться автоматически Renga (в группе ``Системные``) при импорте шаблона стиля. Создавать его вручную не нужно.

.. code-block::
    :caption: Создание групп параметров в массиве ``styleParameters``
    :linenos:

    "styleParameters": [
            {
                "name": "General",
                "text": "Общие",
                "params": []
            },
            {
                "name": "LengthwaysRebars",
                "text": "Продольные арматурные стержни",
                "params": []
            },
            {
                "name": "TransverseRebars",
                "text": "Поперечные арматурные стержни",
                "params": []
            }
        ]

4. Добавим в группу "Общие" параметры типа :ref:`Length <length_param>`, которые будут управлять длиной, шириной и вертикальным смещением каркаса (для возможности разместить его на нижней грани конструкции).


.. code-block::
    :caption: Добавление в группу "Общие" параметров ``meshLength``, ``meshWidth`` и ``meshOffsetZ``.
    :linenos:
    
    {
        "name" : "General",
        "text" : "Общие",
        "params" : [
            {
                "name" : "meshLength",
                "text" : "Длина",
                "type" : "Length",
                "default" : 2800,
                "min" : 100,
                "max" : 10000
            },
            {
                "name" : "meshWidth",
                "text" : "Ширина",
                "type" : "Length",
                "default" : 160,
                "min" : 100,
                "max" : 10000
            },
            {
                "name" : "meshOffsetZ",
                "text" : "Смещение по вертикали",
                "type" : "Length",
                "default" : 0,
                "min" : -1000,
                "max" : 1000
            }
        ]
    }

5. Добавим в группы "Продольные арматурные стержни" и "Поперечные арматурные стержни" параметр "Стиль арматурного стержня" типа :ref:`ID <id_param>` для задания пользователем стиля из возможных в проекте.

.. code-block::
    :caption: Добавление в группу "Продольные арматурные стержни" параметра ``RebarStyleId``.
    :linenos:

    {
        "name": "LengthwaysRebars",
        "text": "Продольные арматурные стержни",
        "params": [
            {
                "name": "RebarStyleId",
                "text": "Стиль арматурного стержня",
                "type": "Id",
                "entityTypeId": "608edb78-96f3-40a6-a0ec-71000105581b"
            },
            ..
        ]
    }

6. Добавим в группу "Продольные арматурные стержни" оставшиеся параметры, которые будут управлять геометрией арматурных стержней.

.. code-block::
    :caption: Группа параметров "Продольные арматурные стержни".
    :linenos:

    {
        "name": "LengthwaysRebars",
        "text": "Продольные арматурные стержни",
        "params": [
            {
                "name": "RebarStyleId",
                "text": "Стиль арматурного стержня",
                "type": "Id",
                "entityTypeId": "608edb78-96f3-40a6-a0ec-71000105581b"
            },
            {
                "name" : "bottomFreeEndLength",
                "text" : "Свободный конец снизу",
                "type" : "Length",
                "default" : 50,
                "min" : 0,
                "max" : 10000
            },
            {
                "name" : "topFreeEndLength",
                "text" : "Свободный конец сверху",
                "type" : "Length",
                "default" : 50,
                "min" : 0,
                "max" : 10000
            },
            {
                "name" : "dowelLength",
                "text" : "Длина выпусков",
                "type" : "Length",
                "default" : 0,
                "min" : 0,
                "max" : 10000
            }
        ]
    }

7. Добавим в группу "Поперечные арматурные стержни" оставшиеся параметры, которые будут управлять геометрией арматурных стержней.

.. code-block::
    :caption: Группа параметров "Поперечные арматурные стержни".
    :linenos:

    {
        "name": "TransverseRebars",
        "text": "Поперечные арматурные стержни",
        "params": [
            {
                "name": "RebarStyleId",
                "text": "Стиль арматурного стержня",
                "type": "Id",
                "entityTypeId": "608edb78-96f3-40a6-a0ec-71000105581b"
            },
            {
                "name" : "rebarStep",
                "text" : "Шаг стержней",
                "type" : "Length",
                "default" : 200,
                "min" : 50,
                "max" : 10000
            },
            {
                "name" : "freeEndLength",
                "text" : "Свободный конец арматуры",
                "type" : "Length",
                "default" : 25,
                "min" : 0,
                "max" : 1000
            }
        ]
    }
